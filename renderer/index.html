<!doctype html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Webhook Testing UI</title>
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css" rel="stylesheet">
    <link rel="stylesheet" href="style.css">
  </head>
  <body>
    <div id="app">
      <header class="header">
        <div class="container">
          <div class="header-content">
            <h1><i class="fas fa-webhook"></i> Webhook Testing UI</h1>
            <div id="connectionStatus" class="connection-status">
              <i class="fas fa-circle"></i>
              <span>Checking connection...</span>
            </div>
          </div>
        </div>
      </header>

      <main class="main">
        <div class="container">
          <!-- Token Generation Section -->
          <section class="token-section">
            <div class="card">
              <h2><i class="fas fa-key"></i> Generate Webhook Token</h2>
              <div class="token-controls">
                <button id="generateToken" class="btn btn-primary">
                  <i class="fas fa-plus"></i> Generate New Token
                </button>
                <input type="text" id="customToken" placeholder="Or enter custom token (GUID format)" class="input">
                <button id="useCustomToken" class="btn btn-secondary">
                  <i class="fas fa-check"></i> Use Custom Token
                </button>
              </div>
            </div>
          </section>

          <!-- Active Token Section -->
          <section id="activeTokenSection" class="active-token-section" style="display: none;">
            <div class="card">
              <h2><i class="fas fa-link"></i> Active Webhook Endpoint</h2>
              <div class="endpoint-info">
                <div class="endpoint-url">
                  <label>Webhook URL:</label>
                  <div class="url-container">
                    <input type="text" id="webhookUrl" readonly class="input url-input">
                    <button id="copyUrl" class="btn btn-icon" title="Copy URL">
                      <i class="fas fa-copy"></i>
                    </button>
                  </div>
                </div>
                <div class="token-info">
                  <label>Token:</label>
                  <span id="currentToken" class="token-display"></span>
                  <button id="clearToken" class="btn btn-danger btn-sm">
                    <i class="fas fa-times"></i> Clear
                  </button>
                </div>
              </div>
            </div>
          </section>

          <!-- Request Logs Section -->
          <section id="requestLogsSection" class="logs-section" style="display: none;">
            <div class="card">
              <div class="logs-header">
                <h2><i class="fas fa-list"></i> Request Logs</h2>
                <div class="logs-controls">
                  <input type="number" id="logCount" value="50" min="1" max="1000" class="input input-sm">
                  <button id="refreshLogs" class="btn btn-secondary">
                    <i class="fas fa-sync-alt"></i> Refresh
                  </button>
                  <button id="toggleAutoRefresh" class="btn btn-secondary">
                    <i class="fas fa-play"></i> Auto Refresh
                  </button>
                  <button id="clearLogs" class="btn btn-danger">
                    <i class="fas fa-trash"></i> Clear View
                  </button>
                </div>
              </div>
              
              <div class="logs-filters">
                <input type="text" id="searchFilter" placeholder="Search requests..." class="input">
                <select id="methodFilter" class="input">
                  <option value="">All Methods</option>
                  <option value="GET">GET</option>
                  <option value="POST">POST</option>
                  <option value="PUT">PUT</option>
                  <option value="DELETE">DELETE</option>
                  <option value="PATCH">PATCH</option>
                </select>
              </div>

              <div id="requestsList" class="requests-list">
                <div class="empty-state">
                  <i class="fas fa-inbox"></i>
                  <p>No requests yet. Send a request to your webhook endpoint to see it here.</p>
                </div>
              </div>
            </div>
          </section>

          <!-- Request Details Modal -->
          <div id="requestModal" class="modal" style="display: none;">
            <div class="modal-content">
              <div class="modal-header">
                <h3><i class="fas fa-info-circle"></i> Request Details</h3>
                <button id="closeModal" class="btn btn-icon">
                  <i class="fas fa-times"></i>
                </button>
              </div>
              <div id="requestDetails" class="modal-body">
                <!-- Request details will be populated here -->
              </div>
            </div>
          </div>
        </div>
      </main>
    </div>
    <script src="main.js"></script>
  </body>
</html>
